<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>complex load</title>
	<style>
		body{
			margin: 0px;
			padding: 0px;
		}
	</style>
	<script src="kineticv4.7.2.js"></script>
</head>
<body>
	<div id="container"></div>
	<script defer="defer">

		var json = '{"attrs":{"width": 578, "height": 200},	"className": "Stage", "children": [{"attrs": {}, "className": "Layer", "children": [{"attrs": {"width": "auto", "height": "auto", "text": "Text Shadow!", "fontFamily": "Calibri", "fontSize": 95, "x": 20, "y": 20, "stroke": "red", "strokeWidth": 2, "shadowColor": "black", "shadowBlur": 2, "shadowOffsetX": 10, "shadowOffsetY": 10, "shadowOpacity": 0.5}, "className": "Text"}, {"attrs": {"stroke": "green", "strokeWidth": 10, "lineJoin": "round", "lineCap": "round", "points":[{"x": 50, "y": 140}, {"x": 450, "y": 160}], "shadowColor": "black", "shadowBlur": 10, "shadowOffsetX": 5, "shadowOffsetY": 5, "shadowOpacity": 0.5}, "className": "Line"}, {"attrs": {"x": 280, "y": 100, "width": 100, "height": 50, "fill": "#00d2ff", "stroke": "black", "strokeWidth": 4, "shadowColor": "black", "shadowBlur": 10, "shadowOffsetX": 5, "shadowOffsetY": 5, "shadowOpacity": 0.5, "rotation": 0.3490658503988659, "id": "blueRectangle"}, "className": "Rect"}, {"attrs": {"x": 100, "y": 41, "width": 106, "height": 118, "id": "yodaImage"}, "className": "Image"}]}]}';



		var stage = Kinetic.Node.create(json, 'container');

		stage.get('#blueRectangle').on('mouseover mouseout', function () {
			var stroke = this.getStroke();
			this.setStroke(stroke === 'black' ? 'red' : 'black');
			stage.draw();
		});

		var imageObj = new Image();
		imageObj.onload = function () {
			stage.get('#yodaImage')[0].setImage(imageObj);
			stage.draw();
		}

		imageObj.src = 'http://www.html5canvastutorials.com/demos/assets/yoda.jpg';

	</script>
</body>
</html>