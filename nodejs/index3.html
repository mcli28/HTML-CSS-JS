<!DOCTYPE HTML>
<script type="text/javascript" src="http://localhost:8080/socket.io/socket.io.js"></script>
<!-- <script type="text/javascript" src="http://localhost:8080/ajax/jquery.js"></script> -->
<html lang="en-US">
<head>
	<meta charset="UTF-8">
	<title></title>
	
</head>
<script type="text/javascript">
	//network functions//
	var socket = io.connect('http://localhost:8080');
	socket.on('nameadded', function (queryname) {
		document.getElementById('thistext').innerHTML = queryname + "was added to the database";
	});
	socket.on('givenames', function (names) {
		document.getElementById('thistext').innerHTML = names;
	});

	function getquery () {
		socket.emit('getname');
	}

	function submitQuery (form) {
		var queryname = form.personname.value;
		var ajaxRequest;

		try{
			ajaxRequest = new XMLHttpRequest();
		}catch (e){
			try{
				ajaxRequest = new ActiveXObject("Msxm12.XMLHTTP");
			}catch (e){
				try{
					ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
				}catch (e){
					alert("your browser broke!");
					return false;
				}
			}
		}
		ajaxRequest.onreadystatechange = function () {
			if (ajaxRequest.readyState == 4) {
				document.getElementById('thistext').innerHTML = ajaxRequest.responseText;
				socket.emit('entername', queryname);
			}
		}
		var queryString = "?name=" + queryname;
		ajaxRequest.open("GET", "addname.php" + queryString, true);
		ajaxRequest.send(null);
	}
</script>
<body>
	enter name into inventory
	<form name="query" action='' method='post' />
		<input type="text" name="personname" value="">
		<input type="button" name="button" value="enter name" onclick="submitQuery(this.form)">
	</form>
	<br>

	get names from inventory
	<form  name="query" action="" method="post" />
	<input type="button" name="button" value="get names" onclick='getquery()' />
	</form>
	<br>
	<br>
	<br>
	<div id="thistext"></div>
</body>
</html>