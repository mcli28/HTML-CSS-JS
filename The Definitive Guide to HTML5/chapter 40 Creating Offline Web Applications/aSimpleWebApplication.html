<!DOCTYPE html>
<html lang="en" manifest="fruit.appcache">
<head>
	<meta charset="UTF-8">
	<title>Example</title>
	<style>
		img {
			border: medium double black;
			padding: 5px;
			margin: 5px;
		}
		div {
			margin-top: 10px;
			margin-bottom: 10px;
		}
		table {
			margin: 10px;
			border-collapse: collapse;
		}
		body > * {
			float: left;
		} 
	</style>
</head>
<body>
	<div>
		<img id="imgtarget" src="banana.jpg">
		<div>
			<button id="banana">Banana</button>
			<button id="apple">Apple</button>
			<button id="cherries">Cherries</button>
		</div>
		<div>
			<button id="update">Update</button>
			<button id="swap">Swap Cache</button>
		</div>
		The status is: <span id="status"></span>
	</div>
	<table id="eventtable" border="1">
		<tr>
			<th>Event Type</th>
		</tr>
	</table>
	<a href="otherpage.html">Link to another page</a>
	<script>
		var buttons = document.getElementsByTagName('button');
		
		for (var i = 0; i < buttons.length; i++) {
			buttons[i].onclick = handleButtonPress;
		}

		window.applicationCache.onchecking = handleEvent;
		window.applicationCache.onnoupdate = handleEvent;
		window.applicationCache.ondownloading = handleEvent;
		window.applicationCache.onupdateready = handleEvent;
		window.applicationCache.oncached = handleEvent;
		window.applicationCache.onobselete = handleEvent;

		function handleEvent (e) {
			document.getElementById("eventtable").innerHTML += 
			"<tr><td>" + e.type + "</td></tr>";
			checkStatus();
		}
		function handleButtonPress (e) {
			switch (e.target.id) {
				case 'swap':
					window.applicationCache.swapCache();
					break;
				case 'update':
					window.applicationCache.update();
					checkStatus();
					break;
				default:
					document.getElementById("imgtarget").src = e.target.id+".jpg";
			}
		}

		function checkStatus() {
			var status = ["UNCACHED", "IDLE", "CHECKING", "DOWNLOADING", "UPDATEREADY", "OBSOLETE"];
			var status = window.applicationCache.status;
			document.getElementById("status").innerHTML = statusNames[status];
		}
	</script>
</body>
</html>