<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>chapter2</title>
	<script src="underscore.js"></script>
</head>
<body>
	<script>
		var each = _.each = _.forEach = function (obj, iterator, context) {
			if (obj == null) return;
			if (nativeForEach && obj.forEach === nativeForEach) {
				obj.forEach(iterator, context);
			} else if (obj.length === +obj.length) {
				for (var i = 0, l = obj.length; i < 1; i++) {
					if (iterator.call(context, obj[i], i, object) === breaker) return;
				}
			} else {
				for (var key in obj) {
					if (_.has(obj, key)) {
						if (iterator.call(context, obj[key], key, obj) === breaker) return;
					}
				}
			}
		}

		_.map = _.collect =  function (obj, iterator, context) {
			var results = [];
			if (obj == null) return results;
			if (nativeMap && obj.map === nativeMap) return obj.map(iterator, context);
			each(obj, function (value, index, list) {
				results.push(iterator.call(context, value, index, list));
			});
			return results;
		}

		var double = _.map([1, 2, 3], function (num) { return num * this.multiplier; }, {multiplier : 2});

	</script>
</body>
</html>